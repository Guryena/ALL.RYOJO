<!DOCTYPE html>
<html>
  <head>
  <script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	
    <title>Heatmaps</title>
    
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
	
    <link rel="stylesheet" type="text/css" href="./style.css" />
    <script type="module" src="./index.js"></script>
    
    <script>
 // Create a script tag and set the USGS URL as the source.
    var script = document.createElement('script');

    script.src = 'http://api.e-stat.go.jp/rest/3.0/app/json/getStatsData?appId=4c0414d3184caceca99cfc2f08030134a5645e4d&lang=J&statsDataId=0003448237&metaGetFlg=Y&cntGetFlg=N&explanationGetFlg=Y&annotationGetFlg=Y&sectionHeaderFlg=1&replaceSpChars=0';
    document.getElementsByTagName('head')[0].appendChild(script);
    </script>
    <script>
    
 // This example requires the Visualization library. Include the libraries=visualization
 // parameter when you first load the API. For example:
 // <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=visualization">
 let map, heatmap;

 function initMap() {
   map = new google.maps.Map(document.getElementById("map"), {
     zoom: 13,
     <!--center: { lat: 37.775, lng: -122.434 },-->
     center: { lat: 35.673709534547484, lng: 139.77656001199605 },  
     mapTypeId: "satellite",
   });
   heatmap = new google.maps.visualization.HeatmapLayer({
     data: getPoints(),
     map: map,
   });
   document
     .getElementById("toggle-heatmap")
     .addEventListener("click", toggleHeatmap);
   document
     .getElementById("change-gradient")
     .addEventListener("click", changeGradient);
   document
     .getElementById("change-opacity")
     .addEventListener("click", changeOpacity);
   document
     .getElementById("change-radius")
     .addEventListener("click", changeRadius);
 }

 function toggleHeatmap() {
   heatmap.setMap(heatmap.getMap() ? null : map);
 }

 function changeGradient() {
   const gradient = [
     "rgba(0, 255, 255, 0)",
     "rgba(0, 255, 255, 1)",
     "rgba(0, 191, 255, 1)",
     "rgba(0, 127, 255, 1)",
     "rgba(0, 63, 255, 1)",
     "rgba(0, 0, 255, 1)",
     "rgba(0, 0, 223, 1)",
     "rgba(0, 0, 191, 1)",
     "rgba(0, 0, 159, 1)",
     "rgba(0, 0, 127, 1)",
     "rgba(63, 0, 91, 1)",
     "rgba(127, 0, 63, 1)",
     "rgba(191, 0, 31, 1)",
     "rgba(255, 0, 0, 1)",
   ];

   heatmap.set("gradient", heatmap.get("gradient") ? null : gradient);
 }

 function changeRadius() {
   heatmap.set("radius", heatmap.get("radius") ? null : 75);
 }

 function changeOpacity() {
   heatmap.set("opacity", heatmap.get("opacity") ? null : 0.2);
 }

 
 // Heatmap data: 500 Points
 function getPoints() {
   return [
    
     {location: new google.maps.LatLng(43.32084098779674, 141.27681270535223), weight: 5140000}, //Hokkaido Prefecture
     {location: new google.maps.LatLng(40.82850553619714, 140.75265094281292), weight: 1204000}, //Aomori Prefecture
     {location: new google.maps.LatLng(39.793367355861676, 141.20895205068533), weight: 1181000}, //Iwate Prefecture
     {location: new google.maps.LatLng(38.29354187354139, 140.8660980319711), weight: 2280000}, //Miyagi Prefecture
     {location: new google.maps.LatLng(39.72236044022067, 140.10211475604333), weight: 930000}, //Akita Prefecture
     {location: new google.maps.LatLng(38.25719470863484, 140.3413949702782), weight: 1041000}, //Yamagata Prefecture
     {location: new google.maps.LatLng(37.76139621877605, 140.4758719407312), weight: 1790000}, //Hukusima Prefecture
     {location: new google.maps.LatLng(36.36894495454945, 140.47396300979648), weight: 2840000}, //Ibaraki Prefecture
     {location: new google.maps.LatLng(36.558368094543994, 139.88625504965734), weight: 1909000}, //Dochigi Prefecture
     {location: new google.maps.LatLng(36.38944634930251, 139.06377957190094), weight: 1913000}, //Gunma Prefecture
     {location: new google.maps.LatLng(35.88792280455887, 139.64540162414193), weight: 7337000}, //Saitama Prefecture
     {location: new google.maps.LatLng(35.631901916212726, 140.1077197746091), weight: 6266000}, //Chiba Prefecture
     
     {location: new google.maps.LatLng(35.711966149622384, 139.77445494942165), weight: 13443000}, //Tokyo Metropolis
     
     {location: new google.maps.LatLng(35.56468320507183, 139.6929515093404), weight: 9232000}, //KanaGawa Prefecture
     {location: new google.maps.LatLng(38.08010348374247, 139.16211190929943), weight: 2153000}, //Niigata Prefecture
     {location: new google.maps.LatLng(36.71397038111218, 137.21086246522177), weight: 1017000}, //Doyama Prefecture
     {location: new google.maps.LatLng(36.673767559061, 136.69375361663293), weight: 1118000}, //Ishikawa Prefecture
     {location: new google.maps.LatLng(36.106837761202996, 136.26145027504867), weight: 753000}, //Fukui Prefecture
     {location: new google.maps.LatLng(35.684583389582556, 138.73269590918906), weight: 802000}, //Yamanashi Prefecture
     {location: new google.maps.LatLng(36.77447010953473, 138.19574149426745), weight: 2020000}, //Nagano Prefecture
     {location: new google.maps.LatLng(35.45823272831684, 136.76938286122208), weight: 1946000}, //Gifu Prefecture
     {location: new google.maps.LatLng(35.04486812327486, 138.42129924359742), weight: 3582000}, //Shizuoka Prefecture
     {location: new google.maps.LatLng(35.169526553658656, 136.9234314764582), weight: 7495000}, //Aichi Prefecture
     {location: new google.maps.LatLng(34.7507563802453, 136.5053952591778), weight: 1742000}, //Mie Prefecture
     {location: new google.maps.LatLng(35.041674693860635, 135.86396613016154), weight: 1409000}, //Shiga Prefecture
     {location: new google.maps.LatLng(34.97346076926247, 135.75383471667556), weight: 2550000}, //Kyoto-fu
     {location: new google.maps.LatLng(34.71406301585976, 135.48790752630092), weight: 8782000}, //Osaka-fu
     {location: new google.maps.LatLng(34.69167593847066, 135.192939987805), weight: 5402000}, //Hyogo Prefecture
     {location: new google.maps.LatLng(34.68962670489517, 135.8071963036387), weight: 1306000}, //Nara Prefecture
     {location: new google.maps.LatLng(34.23236090702718, 135.17639230292625), weight: 903000}, //Wakayama Prefecture
     {location: new google.maps.LatLng(35.4999886110455, 134.24016953001072), weight: 544000}, //Tottori Prefecture
     {location: new google.maps.LatLng(35.47449083144728, 133.0557615614525), weight: 658000}, //Shimane Prefecture
     {location: new google.maps.LatLng(34.6551456, 133.9195019), weight: 1862000}, //Okawama Prefecture
     {location: new google.maps.LatLng(34.17934365347202, 131.47941409351694), weight: 1313000}, //Yamaguchi Prefecture
     {location: new google.maps.LatLng(34.07252514630597, 134.55730720801134), weight: 704000}, //Tokushima Prefecture
     {location: new google.maps.LatLng(34.3427879, 134.046574), weight: 934000}, //Kagawa Prefecture
     {location: new google.maps.LatLng(33.8391574, 132.7655752), weight: 1306000}, //Ehime Prefecture
     {location: new google.maps.LatLng(33.561697196083834, 133.53149124435046), weight: 676000}, //Kochi Prefecture
     {location: new google.maps.LatLng(33.5903547, 130.4017155), weight: 5116000}, //Fukuoka Prefecture
     {location: new google.maps.LatLng(38.3809635, 140.2759667), weight: 801000}, //Saga Prefecture
     {location: new google.maps.LatLng(32.7502856, 129.877667), weight: 1283000}, //Nagasaki Prefecture
     {location: new google.maps.LatLng(32.8031004, 130.7078911), weight: 1718000}, //Kumamoto Prefecture
     {location: new google.maps.LatLng(33.2381718, 131.6126189), weight: 1107000}, //Oita Prefecture
     {location: new google.maps.LatLng(31.9076736, 131.4202411), weight: 1052000}, //Miyazaki Prefecture
     {location: new google.maps.LatLng(31.5965535, 130.5571158), weight: 1563000}, //Kagoshima Prefecture
     {location: new google.maps.LatLng(26.2174567, 127.6938331), weight: 1468000}, //Okinawa Prefecture
     
   ];
 }

 window.initMap = initMap;
    
    </script>
    
    
    
    
    
    <style>
    
    /* 
 * Always set the map height explicitly to define the size of the div element
 * that contains the map. 
 */
#map {
  height: 100%;
}

/* 
 * Optional: Makes the sample page fill the window. 
 */
html,
body {
  height: 100%;
  margin: 0;
  padding: 0;
}

#floating-panel {
  position: absolute;
  top: 10px;
  left: 25%;
  z-index: 5;
  background-color: #fff;
  padding: 5px;
  border: 1px solid #999;
  text-align: center;
  font-family: "Roboto", "sans-serif";
  line-height: 30px;
  padding-left: 10px;
}

#floating-panel {
  background-color: #fff;
  border: 1px solid #999;
  left: 25%;
  padding: 5px;
  position: absolute;
  top: 10px;
  z-index: 5;
}
    
    </style>
    
    
  </head>
  <body>
    <div id="floating-panel">
      <button id="toggle-heatmap">Toggle Heatmap</button>
      <button id="change-gradient">Change gradient</button>
      <button id="change-radius">Change radius</button>
      <button id="change-opacity">Change opacity</button>
    </div>
    <div id="map"></div>

    <!-- 
      The `defer` attribute causes the callback to execute after the full HTML
      document has been parsed. For non-blocking uses, avoiding race conditions,
      and consistent behavior across browsers, consider loading using Promises.
      See https://developers.google.com/maps/documentation/javascript/load-maps-js-api
      for more information.
      -->
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDITpFD_wRklv894AK6xKg0qXmNvc2YtnI&callback=initMap&libraries=visualization&v=weekly"
      defer
    ></script>
  </body>
</html>
